# 問題の定式化

### パラメータ

-  $G = (V, E)$  : グラフ、 $V$  はノード集合、 $E$  はエッジ集合。
-  $N = |V|$  : ノードの総数。
-  $w_j$  : ノード  $j$  における通学路の人流の重み。通学路以外のエッジの重みは 1 であり、通学路のエッジの重みはその通学路の人流を全ての通学路での人流で割って正規化した値に1を加えたもの。
-  $\text{P}_j = (x_j, y_j)$  : ノード  $j$ の座標。
-  $\text{M}$  : 設置可能な街灯の最大数。
-  $\text{v}_j$  : ノード  $j$  における既存の照度。
-  $\delta(j)$  : ノード  $j$  に隣接するノードの集合。
-  $\delta^2(j)$  : ノード  $j$  に2ステップで到達できるノードの集合（隣接ノードを除く）。

### 変数

-  $x_j \in \{0, 1\}$  : ノード  $j$  に街灯を設置するかどうかを表すバイナリ変数。
-  $y_j \in [0, 1]$: ノード  $j$  における照度を表す連続変数。

### 目的関数

各ノード  $j$  の照度に通学路の人流の重みを掛けた合計を最大化する。


$$\text{Maximize } \sum_{j \in V} w_j \cdot y_j$$


### 制約条件

1.	照度の定義: ノード  $j$  の照度は、そこに設置された街灯と、隣接ノードおよび2ステップ先のノードからの影響度の合計で決まる。2で割っているのは、設置箇所の明るさは1、隣接ノード(距離=1)の明るさは0.5としたいため。


$$y_j \leq x_j + \sum_{k \in \delta(j)} \frac{x_k}{2\|\text{P}_j - \text{P}_k\|} + \sum_{l \in \delta^2(j)} \frac{x_l}{2\|\text{P}_j - \text{P}_l\|} + \text{v}_j  \quad \forall j \in V$$


2.	街灯数の制約: 街灯の総数は最大で  $\text{M}$  個。


$$\sum_{j \in V} x_j \leq \text{M}$$


3.	照度の最大値制約: 各ノード  $j$  の照度は1を超えない。


$$y_j \leq 1 \quad \forall j \in V$$
